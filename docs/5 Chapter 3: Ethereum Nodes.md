

# 以太坊节点 (The Ethereum Node)

以太坊节点（Ethereum node）是一个实现了以太坊规范，并通过 **P2P**（点对点）网络与其他以太坊节点进行通信的软件应用程序。

最初，一个节点只需运行单个客户端即可完全实现作为以太坊生态系统成员的所有要求。2022 年 9 月 15 日，“合并”（The Merge）硬分叉发生，将共识协议从基于 **PoW**（工作量证明）的方案更改为 **Gasper**——即新的基于 **PoS**（权益证明）的共识协议。这也导致了关注点分离（separation of concerns）——即共识与执行的分离，并产生了一种新型的以太坊客户端：共识客户端（consensus client）。

因此，在撰写本文时，一个以太坊节点必须同时运行两个软件组件才能与最新的规范兼容，如图 3-1 所示，其定义如下：



**共识客户端 (Consensus client)**

这款新软件现在负责共识协议，让所有节点对区块链的单一历史记录达成一致。

**执行客户端 (Execution client)**

该软件专注于接收网络上发生的所有区块和交易，在 **EVM**（以太坊虚拟机）内部执行它们，并验证其正确性。

[Image 3-1: The architecture of a post-Merge Ethereum node]

---

> [!TIP] **译者注**：
> 1. **引擎 API (Engine API) 与解耦**：从后端架构视角看，合并后的节点实际上演变成了一个微服务架构。共识客户端和执行客户端之间通过 `Engine API`（基于 JSON-RPC）进行通信。这种解耦允许开发者自由组合不同的客户端（例如使用 `Lighthouse` 作为共识层，配合 `Geth` 作为执行层），极大地增强了系统的健壮性和客户端多样性。
> 2. **执行层的本质**：虽然共识层决定了区块的顺序，但作为后端开发者，我们交互最频繁的依然是执行层。执行层维护着完整的状态树（State Tree），所有的合约调用、账户余额查询和 `eth_call` 操作最终都是由执行客户端在本地 **EVM** 中跑完并返回结果的。
